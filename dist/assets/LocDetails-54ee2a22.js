import{o,c as d,F as w,r as b,a as e,t as s,b as x,u as $,d as I,e as g,f as y,g as v,_ as B,h as N,i as W,j as D,l as A,k as C,m as F,L as E,n as h,p as V,A as j}from"./index-b57c3b64.js";const H={class:"loc-updates"},K=e("h2",null,"Updates",-1),P={__name:"LocUpdates",props:{info:{type:Array}},setup(c){const i=c;function l(t){return $.getUpdateByType(t)}function n(t){return I.getFormattedTime(t)}return(t,a)=>(o(),d("section",H,[K,(o(!0),d(w,null,b(i.info,(r,f)=>(o(),d("ul",{key:f},[e("li",null,[e("p",null,s(l(r.type)),1),e("p",null,[e("span",null,s(n(r.updatedAt).date),1),x(" | "),e("span",null,s(n(r.updatedAt).time),1)])])]))),128))]))}},R={class:"loc-notes"},z=e("h2",null,"Location Notes",-1),M={__name:"LocNotes",props:{info:{type:String}},emits:["update-info"],setup(c,{emit:i}){const l=i,n=c;g(()=>{});function t(a){a.target.innerText,l("update-Info",{key:"note",value:a.target.innerText})}return(a,r)=>(o(),d("section",R,[z,e("p",{contenteditable:"true",onBlur:t},s(n.info),33)]))}},O="dae5f4bdc5e8ca68c1090b0be2429cfb";async function Y({lat:c,lng:i}){const n=await(await fetch(`http://api.openweathermap.org/data/2.5/weather?lat=${c}&lon=${i}&APPID=${O}`)).json();return{temp:q(n.main.temp),name:n.name,humidity:n.main.humidity+"%",desc:n.weather[0].description,windSpeed:n.wind.speed+" Knots"}}function q(c){return(c-273.15).toFixed(0)+"Â°C"}const G={getWeatherByLocation:Y},J={key:0,class:"loc-weather"},Q=e("h2",null,"Location Weather",-1),X={__name:"LocWeather",props:{info:{type:Object}},emits:["update-info"],setup(c,{emit:i}){const l=c,n=i,t=y(null);async function a(){t.value=await G.getWeatherByLocation(l.info),n("update-info",{key:"weather",value:null})}return g(()=>{a()}),(r,f)=>t.value?(o(),d("section",J,[Q,e("h4",null,"Location name: "+s(t.value.name),1),e("p",null,"Temperature "+s(t.value.temp)+" - "+s(t.value.dec),1),e("p",null,"Humidity: "+s(t.value.humidity),1),e("p",null,"Wind Speed: "+s(t.value.windSpeed),1)])):v("",!0)}};const Z={key:0,class:"loc-details"},ee=["src"],te={class:"tab-list"},ae=["onClick"],ne={class:"dynamic-container"},oe={__name:"LocDetails",setup(c){const i=N(),l=W(),n=D(),t=["Notes","Updates","Weather"];g(()=>{r(),k()});const a=y(null);async function r(){a.value=await A.getLocById(n.params.locId)}const f=C(()=>l.getUpdates);async function k(){m.value=await l.loadUpdates(n.params.locId)}const _=y("Notes");function U(u){_.value=u}async function m({key:u,value:L}){const p={_id:a.value._id,key:u,value:L};if(u==="weather"){await l.addUpdate(p);return}a.value=await i.updateLoc(p)}function S(u){u.target.innerText,m({key:"name",value:u.target.innerText})}return(u,L)=>a.value?(o(),d("div",Z,[e("h3",{contenteditable:"true",onBlur:S},s(a.value.name),33),e("img",{src:a.value.imgUrl,height:"400",alt:"Location Image"},null,8,ee),F(E,{labels:a.value.labels},null,8,["labels"]),e("div",null,[e("div",te,[(o(),d(w,null,b(t,(p,T)=>e("button",{key:T,class:V(["tab-button",{active:_.value===p}]),onClick:se=>U(p)}," Show "+s(p),11,ae)),64))]),e("div",ne,[_.value==="Notes"?(o(),h(M,{key:0,onUpdateInfo:m,info:a.value.note},null,8,["info"])):v("",!0),_.value==="Updates"?(o(),h(P,{key:1,info:f.value,onUpdateInfo:m},null,8,["info"])):v("",!0),_.value==="Weather"?(o(),h(X,{key:2,onUpdateInfo:m,info:{lat:a.value.lat,lng:a.value.lng}},null,8,["info"])):v("",!0)])])])):(o(),h(j,{key:1}))}},le=B(oe,[["__scopeId","data-v-32f67369"]]);export{le as default};
