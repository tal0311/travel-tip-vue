import{u as k,s as $,o as y,a as l,c as d,F as I,r as T,b as n,t as u,d as m,e as f,f as x,g as B,h as D,_ as W,i as N,j as A,l as C,w as E,k as F,L as Y,m as U}from"./index-e2f990d4.js";const S={getUpdatesByLocationId:j,getUpdateByType:H},b="updatesDB";K();async function j(){return await $.get(b)}function v(e){return{type:e,updatedAt:Date.now()}}function H(e){return{weather:"You have checked the weather for this location at ",note:"You have updated your notes for this location at ",favorite:"you have added this location to your favorites at "}[e]||""}function K(){let e=k.loadFromStorage(b);return(!e||!e.length)&&(e=[{locId:"HiXADs",history:[v("weather"),v("note")]},{locId:"8lbM7u",history:[v("note"),v("note")]}],k.saveToStorage(b,e)),e}const M={class:"loc-updates"},V=n("h2",null,"updates",-1),P={__name:"LocUpdates",props:{info:{type:Array}},setup(e){const s=e;function o(t){return S.getUpdateByType(t)}function a(t){return t}return y(()=>{console.log("props.info:",s.info)}),(t,c)=>(l(),d("section",M,[V,(l(!0),d(I,null,T(s.info.history,(i,g)=>(l(),d("div",{key:g},[n("p",null,u(o(i.type)),1),n("p",null,u(i.updatedAt),1)]))),128))]))}},R={class:"loc-notes"},O=n("h2",null,"LocNotes",-1),X={__name:"LocNotes",props:{info:{type:String}},emits:["update-info"],setup(e,{emit:s}){const o=s,a=e;y(()=>{console.log("props.info:",a.info)});function t(c){c.target.innerText,console.log("text:",c.target.innerText),o("update-Info",{key:"note",value:c.target.innerText})}return(c,i)=>(l(),d("section",R,[O,n("p",{contenteditable:"true",onBlur:t},u(a.info),33)]))}},q="dae5f4bdc5e8ca68c1090b0be2429cfb";async function z({lat:e,lng:s}){const a=await(await fetch(`http://api.openweathermap.org/data/2.5/weather?lat=${e}&lon=${s}&APPID=${q}`)).json();return{temp:G(a.main.temp),name:a.name,humidity:a.main.humidity+"%",desc:a.weather[0].description,windSpeed:a.wind.speed+" Knots"}}function G(e){return(e-273.15).toFixed(0)+"Â°C"}const J={getWeatherByLocation:z},Q={key:0,class:"loc-weather"},Z=n("h2",null,"LocWeather",-1),ee={__name:"LocWeather",props:{info:{type:Object}},setup(e){const s=e,o=m(null);async function a(){o.value=await J.getWeatherByLocation(s.info)}return y(()=>{a()}),(t,c)=>o.value?(l(),d("section",Q,[Z,n("h4",null,"Location name: "+u(o.value.name),1),n("p",null,"Temperature "+u(o.value.temp)+" - "+u(o.value.dec),1),n("p",null,"Humidity: "+u(o.value.humidity),1),n("p",null,"Wind Speed: "+u(o.value.windSpeed),1)])):f("",!0)}},te=x("update",()=>{const e=m(null),s=B(()=>e.value);async function o(t){e.value=await S.getUpdatesByLocationId(t)}async function a(t){const c=await S.addUpdate(t);e.value.push(c),D("Location removed")}return{addUpdate:a,loadUpdates:o,getUpdates:s}});const oe={key:0,class:"loc-details"},ae=["src"],ne={__name:"LocDetails",setup(e){const s=N(),o=te(),a=A();y(()=>{c(),g()});const t=m(null);async function c(){t.value=await C.getLocById(a.params.locId)}const i=B(()=>o.getUpdates);async function g(){L.value=await o.loadUpdates(a.params.locId)}const p=m("Notes");E(()=>console.log("currentTab:",p.value),console.log("updates:",i.value));function w(h){p.value=h}async function L({key:h,value:r}){const _={_id:t.value._id,key:h,value:r};t.value=await s.updateLoc(_)}return(h,r)=>t.value?(l(),d("div",oe,[n("h3",null,u(t.value.name),1),n("img",{src:t.value.imgUrl,alt:"Location Image"},null,8,ae),F(Y,{labels:t.value.labels},null,8,["labels"]),n("div",null,[n("button",{onClick:r[0]||(r[0]=_=>w("Notes"))},"Show Notes"),n("button",{onClick:r[1]||(r[1]=_=>w("Updates"))},"Show Updates"),n("button",{onClick:r[2]||(r[2]=_=>w("Weather"))},"Show Weather"),p.value==="Notes"?(l(),U(X,{key:0,onUpdateInfo:L,info:t.value.note},null,8,["info"])):f("",!0),p.value==="Updates"?(l(),U(P,{key:1,info:i.value,onUpdateInfo:L},null,8,["info"])):f("",!0),p.value==="Weather"?(l(),U(ee,{key:2,info:{lat:t.value.lat,lng:t.value.lng}},null,8,["info"])):f("",!0)])])):f("",!0)}},ce=W(ne,[["__scopeId","data-v-6b834779"]]);export{ce as default};
